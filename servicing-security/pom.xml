<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <parent>
    <groupId>com.worldpay.servicing</groupId>
    <artifactId>servicing-root</artifactId>
    <version>5.0.22-SNAPSHOT</version>
  </parent>

  <artifactId>servicing-security</artifactId>
  <packaging>jar</packaging>
  <name>Servicing Security</name>
  <description>Servicing Authentication and Authorization Functionalities</description>

  <properties>
    <!--
      Exclude AutoGeneratedJWTFilter since it is not a class that will be used in PROD
      Exclude the exception package since it only contains exception classes  -->
    <coverage.exclusions.config>
      **/com/worldpay/servicing/security/AutoGeneratedJWTFilter*,
      **/com/worldpay/servicing/security/exception/*
    </coverage.exclusions.config>
    <!--
    Sonar property to exclude files from code coverage report
   -->
    <sonar.coverage.exclusions>
      ${coverage.exclusions.config}
    </sonar.coverage.exclusions>
  </properties>

  <dependencies>
    <dependency>
      <groupId>com.worldpay.sop.aip.authorization.spring</groupId>
      <artifactId>aip-spring-auth</artifactId>
    </dependency>
    <dependency>
      <groupId>com.worldpay.sop.aip.commons</groupId>
      <artifactId>aip-commons</artifactId>
    </dependency>
    <dependency>
      <groupId>com.worldpay.sop.aip.jwt</groupId>
      <artifactId>jwt-library</artifactId>
    </dependency>
    <dependency>
      <groupId>commons-collections</groupId>
      <artifactId>commons-collections</artifactId>
    </dependency>
    <dependency>
      <groupId>commons-logging</groupId>
      <artifactId>commons-logging</artifactId>
    </dependency>
    <dependency>
      <groupId>org.springframework.security</groupId>
      <artifactId>spring-security-config</artifactId>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-core</artifactId>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-context</artifactId>
    </dependency>
    <dependency>
      <groupId>com.worldpay.tpg</groupId>
      <artifactId>tpg-logging</artifactId>
    </dependency>
    <dependency>
      <groupId>org.springframework.security</groupId>
      <artifactId>spring-security-core</artifactId>
    </dependency>
    <dependency>
      <groupId>javax.servlet</groupId>
      <artifactId>javax.servlet-api</artifactId>
      <scope>provided</scope>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-beans</artifactId>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-web</artifactId>
    </dependency>
    <dependency>
      <groupId>com.worldpay.servicing</groupId>
      <artifactId>servicing-common</artifactId>
      <version>${project.version}</version>
    </dependency>
    <!-- Test dependencies -->
    <dependency>
      <groupId>org.mockito</groupId>
      <artifactId>mockito-core</artifactId>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-test</artifactId>
      <scope>test</scope>
    </dependency>
  </dependencies>

  <build>
    <plugins>
      <plugin>
        <groupId>org.jacoco</groupId>
        <artifactId>jacoco-maven-plugin</artifactId>
        <configuration>
          <excludes>
            <!--
            Don't instrument these classes. The Jacoco code coverage report won't include these
                             classes.
           -->
            <exclude>${coverage.exclusions.config}</exclude>
          </excludes>
        </configuration>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-dependency-plugin</artifactId>
        <configuration>
          <ignoredUnusedDeclaredDependencies>
            <ignoredUnusedDeclaredDependency>
              commons-collections:commons-collections
            </ignoredUnusedDeclaredDependency>
            <ignoredUnusedDeclaredDependency>
              commons-logging:commons-logging
            </ignoredUnusedDeclaredDependency>
          </ignoredUnusedDeclaredDependencies>
          <ignoredUsedUndeclaredDependencies>
          </ignoredUsedUndeclaredDependencies>
        </configuration>
      </plugin>
    </plugins>
  </build>
  <reporting>
    <plugins>
      <plugin>
        <groupId>org.jacoco</groupId>
        <artifactId>jacoco-maven-plugin</artifactId>
        <configuration>
          <excludes>
            <!--
            Don't instrument these classes in the report for the Sonar job. These classes still
                             need to be added in the sonar.coverage.exclusions property in order for the Sonar report to ignore them.
                             If they are not added to the sonar.coverage.exclusions property then they'll show up with 0% code coverage
                             even if some lines/conditions are covered.
           -->
            <exclude>${coverage.exclusions.config}</exclude>
          </excludes>
        </configuration>
      </plugin>
    </plugins>
  </reporting>

</project>
